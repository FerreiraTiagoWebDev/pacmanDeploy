const t={ArrowLeft:{code:37,movement:-1,rotation:180},ArrowUp:{code:38,movement:-20,rotation:270},ArrowRight:{code:39,movement:1,rotation:0},ArrowDown:{code:40,movement:20,rotation:90}},e="wall",s="dot",o="blinky",i="pinky",r="inky",n="clyde",d="pill",a="pacman",c="ghost",h="scared",l="lair",m=["blank",e,s,o,i,r,n,d,a,l],v=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,2,2,2,2,2,2,2,0,2,2,2,2,2,2,2,2,1,1,7,1,1,1,1,1,1,1,2,0,2,1,1,1,1,1,1,7,1,1,2,2,2,2,1,2,2,2,2,0,2,1,2,2,2,2,2,2,1,1,0,0,0,2,1,2,0,0,0,0,2,1,2,0,0,0,0,0,1,1,0,0,0,2,1,2,0,0,0,0,2,1,2,0,0,0,0,0,1,1,0,0,0,2,1,2,0,0,0,0,2,1,2,0,0,0,0,0,1,1,0,0,0,2,1,2,0,0,0,0,2,1,2,0,0,0,0,0,1,1,0,0,0,2,1,2,0,0,0,0,2,1,2,2,2,2,2,2,1,1,0,0,0,2,1,2,0,0,0,0,2,1,1,1,1,1,1,7,1,1,0,0,0,2,1,2,0,0,0,0,2,1,2,2,2,2,2,2,1,1,0,0,0,2,1,2,0,0,0,0,2,1,2,0,0,0,0,0,1,1,0,0,0,2,1,2,0,0,0,0,2,1,2,0,0,0,0,0,1,1,0,0,0,2,1,2,0,0,0,0,2,1,2,0,0,0,0,0,1,1,0,0,0,2,1,2,0,0,0,0,2,1,2,0,0,0,0,0,1,1,0,0,0,2,1,2,0,0,0,0,2,1,2,0,0,0,0,0,1,1,0,0,0,2,1,2,0,0,0,0,2,1,2,0,0,0,0,0,1,1,0,0,0,2,1,2,0,0,0,0,2,1,2,0,0,0,0,0,1,1,0,0,0,2,7,2,0,2,0,0,2,7,2,0,2,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];function u(s,o,i){let r=o,n=s+r.movement;const d=Object.keys(t);for(;i(n,e)||i(n,c);){const e=d[Math.floor(Math.random()*d.length)];r=t[e],n=s+r.movement}return{nextMovePos:n,direction:r}}var p=class{constructor(t){this.dotCount=0,this.grid=[],this.DOMGrid=t}showGameStatus(t){const e=document.createElement("div");e.classList.add("game-status"),e.innerHTML=""+(t?"WIN!":"GAME OVER!"),this.DOMGrid.appendChild(e)}createGrid(t){this.dotCount=0,this.grid=[],this.DOMGrid.innerHTML="",this.DOMGrid.style.cssText="grid-template-columns: repeat(20, 20px);",t.forEach((t=>{const e=document.createElement("div");e.classList.add("square",m[t]),e.style.cssText="width: 20px; height: 20px;",this.DOMGrid.appendChild(e),this.grid.push(e),m[t]===s&&this.dotCount++}))}addObject(t,e){this.grid[t].classList.add(...e)}removeObject(t,e){this.grid[t].classList.remove(...e)}objectExist(t,e){return this.grid[t].classList.contains(e)}rotateDiv(t,e){this.grid[t].style.transform=`rotate(${e}deg)`}moveCharacter(t){if(t.shouldMove()){const{nextMovePos:e,direction:s}=t.getNextMove(this.objectExist.bind(this)),{classesToRemove:o,classesToAdd:i}=t.makeMove();t.rotation&&e!==t.pos&&(this.rotateDiv(e,t.dir.rotation),this.rotateDiv(t.pos,0)),this.removeObject(t.pos,o),this.addObject(e,i),t.setNewPos(e,s)}}static createGameBoard(t,e){const s=new this(t);return s.createGrid(e),s}};var w=class{constructor(t,e){this.pos=e,this.speed=t,this.dir=null,this.timer=0,this.powerPill=!1,this.rotation=!0}shouldMove(){if(this.dir)return this.timer===this.speed?(this.timer=0,!0):void this.timer++}getNextMove(t){let s=this.pos+this.dir.movement;return(t(s,e)||t(s,l))&&(s=this.pos),{nextMovePos:s,direction:this.dir}}makeMove(){return{classesToRemove:[a],classesToAdd:[a]}}setNewPos(t){this.pos=t}handleKeyInput=(s,o)=>{let i;if(!(s.keyCode>=37&&s.keyCode<=40))return;i=t[s.key];o(this.pos+i.movement,e)||(this.dir=i)}};var M=class{constructor(e=5,s,o,i){this.name=i,this.movement=o,this.startPos=s,this.pos=s,this.dir=t.ArrowRight,this.speed=e,this.timer=0,this.isScared=!1,this.rotation=!1}shouldMove(){if(this.timer===this.speed)return this.timer=0,!0;this.timer++}getNextMove(t){const{nextMovePos:e,direction:s}=this.movement(this.pos,this.dir,t);return{nextMovePos:e,direction:s}}makeMove(){const t=[c,h,this.name];let e=[c,this.name];return this.isScared&&(e=[...e,h]),{classesToRemove:t,classesToAdd:e}}setNewPos(t,e){this.pos=t,this.dir=e}};const b=document.querySelector("#game"),g=document.querySelector("#score"),x=document.querySelector("#start-button"),y=p.createGameBoard(b,v);let f=0,P=null,j=!1,E=!1,O=null;function k(t,e){document.removeEventListener("keydown",(e=>t.handleKeyInput(e,y.objectExist.bind(y)))),y.showGameStatus(j),clearInterval(P),x.classList.remove("hide")}function L(t,e){const s=e.find((e=>t.pos===e.pos));s&&(t.powerPill?(y.removeObject(s.pos,[c,h,s.name]),s.pos=s.startPos,f+=100):(y.removeObject(t.pos,[a]),y.rotateDiv(t.pos,0),k(t)))}x.addEventListener("click",(function(){j=!1,E=!1,f=0,x.classList.add("hide"),y.createGrid(v);const t=new w(2,287);y.addObject(287,[a]),document.addEventListener("keydown",(e=>t.handleKeyInput(e,y.objectExist.bind(y))));const e=[new M(5,188,u,o),new M(4,209,u,i),new M(3,230,u,r),new M(2,251,u,n)];P=setInterval((()=>function(t,e){y.moveCharacter(t),L(t,e),e.forEach((t=>y.moveCharacter(t))),L(t,e),y.objectExist(t.pos,s)&&(y.removeObject(t.pos,[s]),y.dotCount--,f+=10),y.objectExist(t.pos,d)&&(y.removeObject(t.pos,[d]),t.powerPill=!0,f+=50,clearTimeout(O),O=setTimeout((()=>t.powerPill=!1),1e4)),t.powerPill!==E&&(E=t.powerPill,e.forEach((e=>e.isScared=t.powerPill))),0===y.dotCount&&(j=!0,k(t)),g.innerHTML=f}(t,e)),80)}));
//# sourceMappingURL=index.cad6a18e.js.map
